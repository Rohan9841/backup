<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Taco Cloud</title>
        <!-- Getting the css file -->
        <!-- @ is used to access location of thymeleaf -->
        <link rel = "stylesheet" th:href = "@{/style.css}"/>
    </head>

    <body>
        <h1>Design your taco!</h1>
        <!-- accessing image for a thymeleaf view -->
        <img th:src = "@{/images/TacoCloud.png}"/>

        <!-- no th:action so redirect to same url as get request i.e /design -->
        <!-- ${design} is a model attribute with value of new Taco() -->
        <!-- new Taco() has name and list of ingredients -->
        <form method = "POST" th:object = "${taco}">

            <!-- If there are any validation error in the ingredients field from Taco class, then display the error message that was written in the Taco class of ingredients field -->
            <span class = "validationError"
                th:if = "${#fields.hasErrors('ingredients')}"
                th:errors = "*{ingredients}">Ingredient Error</span>

            <div class = "grid">
                <div class = "ingredient-group" id = "wraps">
                    <h3>Designate your wrap:</h3>
                    <!-- ${wrap} is a request attribute copied automatically from model attribute which can be directly accessed by thymeleaf-->
                    <!-- $ sign is used to access an attribute in thymeleaf -->
                    <!-- for each wrap request attribute (in this case 2) -->
                    <!-- accesing the ${taco} object's ingredients field and putting it's value to the value that the user selects. However, the value is just an id right 
                        now but we use IngredientByIdConverter class to convert into Ingredient type-->
                    <div th:each = "ingredient: ${wrap}">
                        <!-- setting the value of the input to the id of the ingredient in current loop -->
                        <input th:field = "*{ingredients}" type = "checkbox" th:value = "${ingredient.id}"/>

                        <!-- Writing text in html with current ingredient's name by replace INGREDIENT -->
                        <span th:text = "${ingredient.name}">INGREDIENT</span><br/>
                    </div>
                </div>

                <div class = "ingredient-group" id = "proteins">
                    <h3>Pick your protein:</h3>
                    <div th:each = "ingredient: ${protein}">
                        <input th:field = "*{ingredients}" type = "checkbox" th:value = "${ingredient.id}"/>
                        <span th:text = "${ingredient.name}">INGREDIENT</span><br/>
                    </div>
                </div>

                <div class = "ingredient-group" id = "cheeses">
                    <h3>Choose your cheese:</h3>
                    <div th:each = "ingredient: ${cheese}">
                        <input th:field = "*{ingredients}" type = "checkbox" th:value = "${ingredient.id}"/>
                        <span th:text = "${ingredient.name}">INGREDIENT</span><br/>
                    </div>
                </div>

                <div class = "ingredient-group" id = "veggies">
                    <h3>Pick your veggies:</h3>
                    <div th:each = "ingredient: ${veggies}">
                        <input th:field = "*{ingredients}" type = "checkbox" th:value = "${ingredient.id}"/>
                        <span th:text = "${ingredient.name}">INGREDIENT</span><br/>
                    </div>
                </div>

                <div class = "ingredient-group" id = "sauces">
                    <h3>Choose your sauce</h3>
                    <div th:each = "ingredient: ${sauce}">
                        <input th:field = "*{ingredients}" type = "checkbox" th:value = "${ingredient.id}"/>
                        <span th:text = "${ingredient.name}">INGREDIENT</span>
                    </div>
                </div>
            </div>

            <div>
                <h3>Name your taco creation</h3>
                <input type = "text" th:field = "*{name}"/>
                <span class = "validationError"
                    th:if = "${#fields.hasErrors('name')}"
                    th:errors = "*{name}">Name Error</span>
                <br/>

                <button>Submit your taco</button>
            </div>
        </form>
    </body>
</html>